{"version":3,"file":"js/wphb-global.min.js","mappings":"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","sources":["webpack://wp-hummingbird/./_src/js/global.js"],"sourcesContent":["/* global wphbGlobal */\n\n( function() {\n\t'use strict';\n\n\tconst WPHBGlobal = {\n\t\tinit() {\n\t\t\tthis.registerClearAllCache();\n\t\t\tthis.registerClearNetworkCache();\n\t\t\tthis.registerClearCacheFromNotice();\n\t\t\tthis.registerClearCloudflare();\n\t\t\tthis.registerSafeModeActions();\n\t\t\tthis.registerDelayCriticalModal();\n\t\t},\n\n\t\t/**\n\t\t * Trigger the delay JS modal for non member.\n\t\t *\n\t\t * @since 3.5.0\n\t\t */\n\t\tregisterDelayCriticalModal() {\n\t\t\t// Open non pro member modal for delay JS.\n\t\t\tconst nonLoggedInToggle = document.getElementById( 'non_logged_in_delay_js' );\n\t\t\tif ( nonLoggedInToggle ) {\n\t\t\t\tnonLoggedInToggle.onclick = function() {\n\t\t\t\t\tWPHB_Admin.minification.hbTriggerUpsellModal( nonLoggedInToggle.dataset.url, nonLoggedInToggle.dataset.location, 'delay-js' );\n\n\t\t\t\t\treturn false;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Open non pro member modal for critical CSS.\n\t\t\tconst nonLoggedInCriticalToggle = document.getElementById( 'non_logged_in_critical_css' );\n\t\t\tif ( nonLoggedInCriticalToggle ) {\n\t\t\t\tnonLoggedInCriticalToggle.onclick = function() {\n\t\t\t\t\tWPHB_Admin.minification.hbTriggerUpsellModal( nonLoggedInCriticalToggle.dataset.url, nonLoggedInCriticalToggle.dataset.location, 'critical-css' );\n\n\t\t\t\t\treturn false;\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Clear selected module from admin bar.\n\t\t *\n\t\t * @since 3.0.1\n\t\t *\n\t\t * @param {string} module Module ID.\n\t\t */\n\t\tclearCache( module ) {\n\t\t\tjQuery\n\t\t\t\t.ajax( {\n\t\t\t\t\turl: wphbGlobal.ajaxurl,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tnonce: wphbGlobal.nonce,\n\t\t\t\t\t\taction: 'wphb_clear_caches',\n\t\t\t\t\t\tmodules: [ module ],\n\t\t\t\t\t},\n\t\t\t\t} )\n\t\t\t\t.done( function() {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t} );\n\t\t},\n\n\t\t/**\n\t\t * Clear all cache from admin bar.\n\t\t *\n\t\t * @since 3.0.1\n\t\t */\n\t\tregisterClearAllCache() {\n\t\t\tconst btn = document.getElementById(\n\t\t\t\t'wp-admin-bar-wphb-clear-all-cache'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () =>\n\t\t\t\tthis.post( 'wphb_global_clear_cache' )\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Clear network cache.\n\t\t */\n\t\tregisterClearNetworkCache() {\n\t\t\tconst btn = document.querySelector(\n\t\t\t\t'#wp-admin-bar-wphb-clear-cache-network-wide > a'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () => {\n\t\t\t\tif ( 'undefined' === typeof window.WPHB_Admin ) {\n\t\t\t\t\twindow.location.href =\n\t\t\t\t\t\t'/wp-admin/network/admin.php?page=wphb-caching&update=open-ccnw';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twindow.SUI.openModal(\n\t\t\t\t\t'ccnw-modal',\n\t\t\t\t\t'wpbody',\n\t\t\t\t\t'ccnw-clear-now'\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\n\t\t/**\n\t\t * Clear cache from notice regarding plugin/theme updates.\n\t\t */\n\t\tregisterClearCacheFromNotice() {\n\t\t\tconst btn = document.getElementById(\n\t\t\t\t'wp-admin-notice-wphb-clear-cache'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () =>\n\t\t\t\tthis.post( 'wphb_global_clear_cache' )\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Clear Cloudflare browser cache.\n\t\t *\n\t\t * @since 2.7.2\n\t\t */\n\t\tregisterClearCloudflare() {\n\t\t\tconst btn = document.querySelector(\n\t\t\t\t'#wp-admin-bar-wphb-clear-cloudflare > a'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () =>\n\t\t\t\tthis.post( 'wphb_front_clear_cloudflare' )\n\t\t\t);\n\t\t},\n\n\t\tcopyTextToClipboard: (text) => {\n\t\t\tconst textArea = document.createElement(\"textarea\");\n\t\t\ttextArea.value = text;\n\n\t\t\t// Avoid scrolling to bottom\n\t\t\ttextArea.style.top = \"0\";\n\t\t\ttextArea.style.left = \"0\";\n\t\t\ttextArea.style.position = \"fixed\";\n\n\t\t\tdocument.body.appendChild(textArea);\n\t\t\ttextArea.focus();\n\t\t\ttextArea.select();\n\n\t\t\ttry {\n\t\t\t\tdocument.execCommand('copy');\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Oops, unable to copy', err);\n\t\t\t}\n\n\t\t\tdocument.body.removeChild(textArea);\n\t\t},\n\n\t\t/**\n\t\t * Regsiter safe mode actions.\n\t\t *\n\t\t * @since 3.4.0\n\t\t */\n\t\tregisterSafeModeActions() {\n\t\t\tconst saveButton = document.getElementById( 'wphb-ao-safe-mode-save' );\n\t\t\tif ( saveButton ) {\n\t\t\t\tsaveButton.addEventListener('click', () => {\n\t\t\t\t\tsaveButton.disabled = true;\n\t\t\t\t\tthis.request('wphb_react_minify_publish_safe_mode')\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\twindow.location.href = wphbGlobal.minify_url + '&safe_mode_status=published';\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst copyButton = document.getElementById('wphb-ao-safe-mode-copy');\n\t\t\tif (copyButton) {\n\t\t\t\tcopyButton.addEventListener('click', (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.copyTextToClipboard(window.location.href);\n\n\t\t\t\t\tconst successClass = 'wphb-ao-safe-mode-copy-success';\n\t\t\t\t\tcopyButton.classList.add(successClass);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tcopyButton.classList.remove(successClass);\n\t\t\t\t\t}, 3000);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Send AJAX request.\n\t\t *\n\t\t * @param {string}  action\n\t\t * @param {boolean} reload\n\t\t */\n\t\tpost(action, reload = true) {\n\t\t\tthis.request(action)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (reload) {\n\t\t\t\t\t\tlocation.reload(action)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\n\t\trequest(action) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\t\txhr.open('POST', wphbGlobal.ajaxurl + '?action=' + action + '&_ajax_nonce=' + wphbGlobal.nonce);\n\t\t\t\txhr.onload = function () {\n\t\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\txhr.send();\n\t\t\t});\n\t\t}\n\t};\n\n\tdocument.addEventListener( 'DOMContentLoaded', function() {\n\t\tWPHBGlobal.init();\n\t} );\n\n\twindow.WPHBGlobal = WPHBGlobal;\n}() );\n"],"names":["WPHBGlobal","init","this","registerClearAllCache","registerClearNetworkCache","registerClearCacheFromNotice","registerClearCloudflare","registerSafeModeActions","registerDelayCriticalModal","nonLoggedInToggle","document","getElementById","onclick","WPHB_Admin","minification","hbTriggerUpsellModal","dataset","url","location","nonLoggedInCriticalToggle","clearCache","module","jQuery","ajax","wphbGlobal","ajaxurl","method","data","nonce","action","modules","done","reload","_this","btn","addEventListener","post","querySelector","window","SUI","openModal","href","_this2","_this3","copyTextToClipboard","text","textArea","createElement","value","style","top","left","position","body","appendChild","focus","select","execCommand","err","console","error","removeChild","_this4","saveButton","disabled","request","then","minify_url","copyButton","e","preventDefault","successClass","classList","add","setTimeout","remove","arguments","length","undefined","Promise","resolve","xhr","XMLHttpRequest","open","onload","status","send"],"sourceRoot":""}